---
category: shader
tags: [U3D, Shader,Cookbook,中文版]
---








## 第二章 表面着色器和贴图映射 

在这一章节，我们将会探索表面着色器的使用。我们会用一个非常简单的磨砂材质开始讲起，然后会在后面讲解全息投影和高级的地形混合。 我们将能够使用贴图制作动画效果，混合等，或者用着色器去驱动我们想要的属性。在这一章你将会学习下面一些表面着色器的使用方法：
- 漫反射的着色处理
- 使用压缩数组
- 向着色器添加贴图
- 通过改变UV值来移动贴图
- 法线映射
- 创建一个带透明通道的材质
- 创建一个有全息效果的着色器
- 贴图的压缩和混合
- 在地形的表面画一个圆 
***






### 介绍

我们在**第一章**，***创建你的第一个着色器*** 已经介绍了表面着色器，这是Unity引擎中的主要着色器类型。在这一章我们将更详细的向你展示它到底是什么以及它具体是如何工作的。通常来说，每个表面着色器都有两个重要的步骤。 首先，你需要在材质中描述你想指定的物理属性，比如漫反射的颜色，光滑度和透明度等。 这些属性将会在一个叫**表面函数 surface function**的函数中初始化并且保存在一个叫**表面结构体 surface output**的结构体中。其次，**表面结构体 surface output**结构体传入到一个**光照模型 lighting model**中。这是一个特殊的函数，这个函数会获取场景周围的光照信息。所有获得的这些信息将会被用于去计算你的模型最终在每一个像素点上最终呈现出来的颜色。这个光照函数就是着色器真正进行计算的地方，而正是这部分代码，决定了使用这个着色器材质的光照表现。下面的示意图简单的总结了表面着色器时如何工作的。在**第三章**，***理解照明模型***  将探索自定义光照模型，当学习到**第五章**，***顶点函数*** 会着重讲解顶点修改器：
<div align="center"><img src="https://linkliu.github.io/tech-landscape/assets/img/shader_book/diagram10.png"/></div> 
***







### 漫反射的着色处理

在我们开始学习贴图映射之前，了解漫反射材质时如何工作的显得尤为重要。具体的一些物体也许会有统一的光照和光滑的表面，但是可以还是不够光滑来反射光线。磨砂材质是漫反射着色器使用的一个典型代表 。然而我们现实世界中，完全漫反射材质是不存在的；漫反射着色器是一种成本相对比较低的实现方式并且在低多边形风格中有着大量的应用。

***







- **始前准备**

  有好几种方式来创建你自己的漫反射着色器。最快的一个方式是在Unity5中创建一个表面着色器然后编辑它，移除所有的贴图，跟我们前面学习的**第一章**，***创建你的第一个着色器*** 类似。

***







- **操作步骤**